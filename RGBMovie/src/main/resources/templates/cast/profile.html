<!DOCTYPE html>
<html
        layout:decorate="~{layout/default}"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        xmlns:th="http://www.thymeleaf.org"
>
<head>
    <meta charset="UTF-8"/>
    <title>Cast</title>
</head>

<body>
<!--begin::Content-->
<div
        class="content d-flex flex-column flex-column-fluid"
        id="kt_content"
        layout:fragment="content"
>
    <!-- Add a script tag to show the alert -->
    <script th:inline="javascript">
        /*<![CDATA[*/
        var message = /*[[${message}]]*/ '';
        if (message) {
            alert(message);
        }
        /*]]>*/
    </script>
    <!--begin::Toolbar-->
    <div class="toolbar" id="kt_toolbar">
        <!--begin::Container-->
        <div
                class="container-fluid d-flex flex-stack"
                id="kt_toolbar_container"
        >
            <!--begin::Page title-->
            <div
                    class="page-title d-flex align-items-center flex-wrap me-3 mb-5 mb-lg-0"
                    data-kt-swapper="true"
                    data-kt-swapper-mode="prepend"
                    data-kt-swapper-parent="{default: '#kt_content_container', 'lg': '#kt_toolbar_container'}"
            >
                <!--begin::Title-->
                <h1 class="d-flex align-items-center text-dark fw-bolder fs-3 my-1">
                    Director Detail
                </h1>
                <!--end::Title-->
                <!--begin::Separator-->
                <span class="h-20px border-gray-200 border-start mx-4"></span>
                <!--end::Separator-->
                <!--begin::Breadcrumb-->
                <ul class="breadcrumb breadcrumb-separatorless fw-bold fs-7 my-1">
                    <!--begin::Item-->
                    <li class="breadcrumb-item text-muted">
                        <a
                                class="text-muted text-hover-primary"
                                href="/home"
                        >Home</a
                        >
                    </li>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <li class="breadcrumb-item">
                        <span class="bullet bg-gray-200 w-5px h-2px"></span>
                    </li>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <li class="breadcrumb-item text-muted">Theater Management</li>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <li class="breadcrumb-item">
                        <span class="bullet bg-gray-200 w-5px h-2px"></span>
                    </li>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <li class="breadcrumb-item text-dark">Cast</li>
                    <!--end::Item-->
                </ul>
                <!--end::Breadcrumb-->
            </div>
            <!--end::Page title-->
        </div>
        <!--end::Container-->
    </div>
    <!--end::Toolbar-->
    <!--begin::Post-->
    <div class="post d-flex flex-column-fluid" id="kt_post">
        <!--begin::Container-->
        <div class="container-xxl" id="kt_content_container">
            <!--begin::Basic info-->
            <div class="card mb-5 mb-xl-10">
                <!--begin::Card header-->
                <div aria-controls="kt_account_profile_details" aria-expanded="true"
                     class="card-header border-0 cursor-pointer"
                     data-bs-target="#kt_account_profile_details" data-bs-toggle="collapse"
                     role="button">
                    <!--begin::Card title-->
                    <div class="card-title m-0">
                        <h3 class="fw-bolder m-0">Profile Details</h3>
                    </div>
                    <!--end::Card title-->
                </div>
                <!--begin::Card header-->
                <!--begin::Content-->
                <div class="collapse show" id="kt_account_profile_details">
                    <!--begin::Form-->
                    <form class="form" enctype="multipart/form-data" id="kt_account_profile_details_form"
                          th:action="@{/admin/cast/edit}" th:method="put">
                        <!--begin::Card body-->
                        <div class="card-body border-top p-9">
                            <!--begin::Input group-->
                            <div class="row mb-6">
                                <!--begin::Label-->
                                <label class="col-lg-4 col-form-label fw-bold fs-6">Avatar</label>
                                <!--end::Label-->
                                <!--begin::Col-->
                                <div class="col-lg-8">
                                    <!--begin::Image input-->
                                    <div class="image-input image-input-outline" data-kt-image-input="true"
                                         th:style="'background-image : url(assets/media/avatars/blank.png)'">
                                        <!--begin::Preview existing avatar-->
                                        <div class="image-input-wrapper w-125px h-125px"
                                             th:style="'background-image: url(' + ${cast.profileImg} + ')'"></div>
                                        <!--end::Preview existing avatar-->
                                        <!--begin::Label-->
                                        <label class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow"
                                               data-bs-toggle="tooltip" data-kt-image-input-action="change"
                                               title="Change avatar">
                                            <i class="bi bi-pencil-fill fs-7"></i>
                                            <!--begin::Inputs-->
                                            <input accept=".png, .jpg, .jpeg" name="image" type="file"/>
                                            <input name="avatar_remove" type="hidden"/>
                                            <input hidden th:field="${cast.profileImg}"
                                                   th:value="${cast.profileImg}" type="text">
                                            <input hidden name="pk" th:value="${cast.pk}" type="text">
                                            <!--end::Inputs-->
                                        </label>
                                        <!--end::Label-->
                                        <!--begin::Cancel-->
                                        <span class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow"
                                              data-bs-toggle="tooltip" data-kt-image-input-action="cancel"
                                              title="Cancel avatar">
																<i class="bi bi-x fs-2"></i>
															</span>
                                        <!--end::Cancel-->
                                        <!--begin::Remove-->
                                        <span class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow"
                                              data-bs-toggle="tooltip" data-kt-image-input-action="remove"
                                              title="Remove avatar">
																<i class="bi bi-x fs-2"></i>
															</span>
                                        <!--end::Remove-->
                                    </div>
                                    <!--end::Image input-->
                                    <!--begin::Hint-->
                                    <div class="form-text">Allowed file types: png, jpg, jpeg.</div>
                                    <!--end::Hint-->
                                </div>
                                <!--end::Col-->
                            </div>
                            <!--end::Input group-->
                            <!--begin::Input group-->
                            <div class="row mb-6">
                                <!--begin::Label-->
                                <label class="col-lg-4 col-form-label fw-bold fs-6 required" for="username">Name</label>
                                <!--end::Label-->
                                <!--begin::Col-->
                                <div class="col-lg-8 fv-row">
                                    <input class="form-control form-control-lg form-control-solid" id="username"
                                           required
                                           th:field="${cast.actor}" th:value="${cast.actor}" type="text"/>
                                </div>
                                <div class="invalid-feedback">
                                    Name is required
                                </div>
                                <!--end::Col-->
                            </div>
                            <!--end::Input group-->


                        </div>
                        <!--end::Card body-->
                        <!--begin::Actions-->
                        <div class="card-footer d-flex justify-content-end py-6 px-9">
                            <button class="btn btn-light btn-active-light-primary me-2" type="reset">Discard</button>
                            <button class="btn btn-primary" id="kt_account_profile_details_submit" type="submit">Save
                                Changes
                            </button>
                        </div>
                        <!--end::Actions-->
                    </form>
                    <!--end::Form-->
                </div>
                <!--end::Content-->
            </div>
            <!--end::Basic info-->
            <!--begin::Card-->
            <div class="card">
                <!--begin::Card header-->
                <div class="card-header border-0 pt-6">
                    <!--begin::Card toolbar-->
                    <div class="card-toolbar">
                        <!--begin::Toolbar-->
                        <div
                                class="d-flex justify-content-end"
                                data-kt-user-table-toolbar="base"
                        >
                            <!--begin::Add user-->
                            <button
                                    class="btn btn-primary"
                                    data-bs-target="#kt_modal_add_user"
                                    data-bs-toggle="modal"
                                    type="button"
                            >
                                <!--begin::Svg Icon | path: icons/duotune/arrows/arr075.svg-->
                                <span class="svg-icon svg-icon-2">
                      <svg
                              fill="none"
                              height="24"
                              viewBox="0 0 24 24"
                              width="24"
                              xmlns="http://www.w3.org/2000/svg"
                      >
                        <rect
                                fill="black"
                                height="2"
                                opacity="0.5"
                                rx="1"
                                transform="rotate(-90 11.364 20.364)"
                                width="16"
                                x="11.364"
                                y="20.364"
                        />
                        <rect
                                fill="black"
                                height="2"
                                rx="1"
                                width="16"
                                x="4.36396"
                                y="11.364"
                        />
                      </svg>
                    </span>
                                <!--end::Svg Icon-->Add Movie Cast
                            </button>
                            <!--end::Add user-->
                        </div>
                        <!--end::Toolbar-->
                        <!--begin::Modal - Add task-->
                        <div
                                aria-hidden="true"
                                class="modal fade"
                                id="kt_modal_add_user"
                                tabindex="-1"
                        >
                            <!--begin::Modal dialog-->
                            <div class="modal-dialog modal-dialog-centered mw-650px">
                                <!--begin::Modal content-->
                                <div class="modal-content">
                                    <!--begin::Modal header-->
                                    <div class="modal-header" id="kt_modal_add_user_header">
                                        <!--begin::Modal title-->
                                        <h2 class="fw-bolder">Add Movie</h2>
                                        <!--end::Modal title-->
                                        <!--begin::Close-->
                                        <div
                                                class="btn btn-icon btn-sm btn-active-icon-primary"
                                                data-kt-users-modal-action="close"
                                        >
                                            <!--begin::Svg Icon | path: icons/duotune/arrows/arr061.svg-->
                                            <span class="svg-icon svg-icon-1">
                            <svg
                                    fill="none"
                                    height="24"
                                    viewBox="0 0 24 24"
                                    width="24"
                                    xmlns="http://www.w3.org/2000/svg"
                            >
                              <rect
                                      fill="black"
                                      height="2"
                                      opacity="0.5"
                                      rx="1"
                                      transform="rotate(-45 6 17.3137)"
                                      width="16"
                                      x="6"
                                      y="17.3137"
                              />
                              <rect
                                      fill="black"
                                      height="2"
                                      rx="1"
                                      transform="rotate(45 7.41422 6)"
                                      width="16"
                                      x="7.41422"
                                      y="6"
                              />
                            </svg>
                          </span>
                                            <!--end::Svg Icon-->
                                        </div>
                                        <!--end::Close-->
                                    </div>
                                    <!--end::Modal header-->
                                    <!--begin::Modal body-->
                                    <div class="modal-body scroll-y mx-5 mx-xl-15 my-7">
                                        <!--begin::Form-->
                                        <form
                                                class="form kt_forms"
                                                enctype="multipart/form-data"
                                                id="kt_modal_add_user_form"
                                                novalidate
                                                th:action="@{/admin/cast/addMovie}"
                                                th:method="put"
                                        >
                                            <!--begin::Scroll-->
                                            <div
                                                    class="d-flex flex-column scroll-y me-n7 pe-7"
                                                    data-kt-scroll="true"
                                                    data-kt-scroll-activate="{default: false, lg: true}"
                                                    data-kt-scroll-dependencies="#kt_modal_add_user_header"
                                                    data-kt-scroll-max-height="auto"
                                                    data-kt-scroll-offset="300px"
                                                    data-kt-scroll-wrappers="#kt_modal_add_user_scroll"
                                                    id="kt_modal_add_user_scroll"
                                            >
                                                <input name="castId" th:value="${cast.pk}"
                                                       type="hidden">

                                                <!--begin::Input group-->
                                                <div class="fv-row mb-7">
                                                    <p class="required fw-bold fs-6 mb-2">Movie Cast</p>
                                                    <!--begin::Label-->
                                                    <label
                                                            class="form-check fw-bold fs-6 mb-2"
                                                            th:each="m : ${movies}" th:for="${m.pk}"

                                                    ><!--begin::Input-->
                                                        <input name="movie"
                                                               th:id="${m.pk}"
                                                               th:text="${m.title}"
                                                               th:value="${m.pk}"
                                                               type="checkbox"
                                                        />
                                                        <!--end::Input--></label
                                                    >
                                                    <!--end::Label-->

                                                </div>
                                                <!--end::Input group-->

                                            </div>
                                            <!--end::Scroll-->
                                            <!--begin::Actions-->
                                            <div class="text-center pt-15">
                                                <button
                                                        class="btn btn-light me-3"
                                                        data-kt-users-modal-action="cancel"
                                                        type="reset"
                                                >
                                                    Discard
                                                </button>
                                                <button
                                                        class="btn btn-primary"
                                                        data-kt-users-modal-action="submit"
                                                        type="submit"
                                                >
                                                    <span class="indicator-label">Submit</span>
                                                    <span class="indicator-progress"
                                                    >Please wait...
                                <span
                                        class="spinner-border spinner-border-sm align-middle ms-2"
                                ></span
                                ></span>
                                                </button>
                                            </div>
                                            <!--end::Actions-->
                                        </form>
                                        <!--end::Form-->
                                    </div>
                                    <!--end::Modal body-->
                                </div>
                                <!--end::Modal content-->
                            </div>
                            <!--end::Modal dialog-->
                        </div>
                        <!--end::Modal - Add task-->
                    </div>
                    <!--end::Card toolbar-->
                </div>
                <!--end::Card header-->
                <!--begin::Card body-->
                <div class="card-body pt-0">
                    <!--begin::Table-->
                    <table
                            class="table align-middle table-row-dashed fs-6 gy-5"
                            id="kt_table_users"
                    >
                        <!--begin::Table head-->
                        <thead>
                        <!--begin::Table row-->
                        <tr
                                class="text-start text-muted fw-bolder fs-7 text-uppercase gs-0"
                        >
                            <th class="min-w-125px">Movie</th>
                            <th class="text-end min-w-100px">Actions</th>
                        </tr>
                        <!--end::Table row-->
                        </thead>
                        <!--end::Table head-->
                        <!--begin::Table body-->
                        <tbody class="text-gray-600 fw-bold">
                        <!--begin::If no data-->
                        <tr
                                th:if="${cast.castingsByPk.isEmpty()}">
                            <td>No Data...</td>
                        </tr>
                        <!--end::If no data-->
                        <!--begin::Table row-->
                        <tr th:each="item : ${cast.castingsByPk}">

                            <!--begin::User=-->
                            <!--begin::No-->
                            <!--end::No-->
                            <td class="badge-info" th:each="mo : ${movie}"
                                th:if="${item.movie == mo.pk}"
                                th:text="${mo.title}">
                            </td>
                            <!--begin::Action=-->
                            <td class="text-end">
                                <a
                                        class="btn btn-light btn-active-light-primary btn-sm"
                                        data-kt-menu-placement="bottom-end"
                                        data-kt-menu-trigger="click"
                                        href="#"
                                >Actions
                                    <!--begin::Svg Icon | path: icons/duotune/arrows/arr072.svg-->
                                    <span class="svg-icon svg-icon-5 m-0">
                          <svg
                                  fill="none"
                                  height="24"
                                  viewBox="0 0 24 24"
                                  width="24"
                                  xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                                    d="M11.4343 12.7344L7.25 8.55005C6.83579 8.13583 6.16421 8.13584 5.75 8.55005C5.33579 8.96426 5.33579 9.63583 5.75 10.05L11.2929 15.5929C11.6834 15.9835 12.3166 15.9835 12.7071 15.5929L18.25 10.05C18.6642 9.63584 18.6642 8.96426 18.25 8.55005C17.8358 8.13584 17.1642 8.13584 16.75 8.55005L12.5657 12.7344C12.2533 13.0468 11.7467 13.0468 11.4343 12.7344Z"
                                    fill="black"
                            />
                          </svg>
                        </span>
                                    <!--end::Svg Icon--></a
                                >
                                <!--begin::Menu-->
                                <div
                                        class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold fs-7 w-125px py-4"
                                        data-kt-menu="true"
                                >

                                    <!--begin::Menu item-->
                                    <div class="menu-item px-3">
                                        <a
                                                class="menu-link px-3"
                                                data-kt-users-table-filter="delete_row"
                                                th:href="@{/cast/delete/movie(id=${item.pk})}"
                                                th:onclick="return confirmDelete()"
                                        >Delete</a
                                        >
                                        <script> function confirmDelete() {
                                            return confirm("Are you sure you want to delete this row?");
                                        } </script>
                                    </div>
                                    <!--end::Menu item-->
                                </div>
                                <!--end::Menu-->
                            </td>
                            <!--end::Action=-->
                        </tr>
                        <!--end::Table row-->
                        </tbody>
                        <!--end::Table body-->
                    </table>
                    <!--end::Table-->
                </div>
                <!--end::Card body-->
            </div>
            <!--end::Card-->
        </div>
        <!--end::Container-->
        <!--begin::Page Vendors Javascript(used by this page)-->
        <script
                defer
                th:src="@{/assets/plugins/custom/datatables/datatables.bundle.js}"
                xmlns:th="http://www.thymeleaf.org"
        ></script>
        <!--end::Page Vendors Javascript-->
        <!--begin::Page Custom Javascript(used by this page)-->
        <script
                defer
                th:src="@{/assets/js/custom/apps/user-management/users/list/table.js}"
                xmlns:th="http://www.thymeleaf.org"
        ></script>
        <script
                defer
                th:src="@{/assets/js/custom/apps/user-management/users/list/add.js}"
                xmlns:th="http://www.thymeleaf.org"
        ></script>
        <script
                defer
                th:src="@{/assets/js/custom/widgets.js}"
                xmlns:th="http://www.thymeleaf.org"
        ></script>
        <script th:src="@{/assets/js/custom/disable-invalid-form-submit.js}"></script>
        <!--end::Page Custom Javascript-->
    </div>
    <!--end::Post-->
</div>
<!--end::Content-->
</body>
</html>
